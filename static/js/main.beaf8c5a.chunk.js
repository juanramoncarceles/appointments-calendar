(this["webpackJsonpappointments-calendar"]=this["webpackJsonpappointments-calendar"]||[]).push([[0],{84:function(e,t,a){"use strict";a.r(t);var n=a(5),r=a(0),i=a(10),o=a.n(i),c=a(120),s=a(119),l=a(117),d=a(122),u=a(118),m=a(18),p=a(60),f=a(15),b=a(12),j="es-ES",O="yyyy-MM",h=Object.freeze([6,7]);function g(e){return e.toLocaleString(b.DateTime.TIME_24_SIMPLE)}function y(e){return e.toFormat("HH:mm")}var x=a(54),v=a(55),D=function(){function e(t,a,n,r){Object(x.a)(this,e),this.id=void 0,this.title=void 0,this.startDate=void 0,this.endDate=void 0,this.id=t,this.title=a,this.startDate=n,this.endDate=r}return Object(v.a)(e,[{key:"daysInterval",get:function(){var e=this.startDate.startOf("day"),t=this.endDate.endOf("day");return b.Interval.fromDateTimes(e,t)}}]),e}(),T={isDialogOpen:!1,selectedDay:void 0,appointments:[],stagingAppointment:void 0},w=Object(r.createContext)(void 0),I=Object(r.createContext)(void 0),S=function(e,t){switch(t.type){case"NEW_APPOINTMENT":return Object(f.a)(Object(f.a)({},e),{},{isDialogOpen:!0,selectedDay:t.payload,stagingAppointment:void 0});case"CLOSE_DIALOG":return Object(f.a)(Object(f.a)({},e),{},{isDialogOpen:!1,stagingAppointment:void 0});case"SUBMIT_APPOINTMENT":var a,n=t.payload,r=e.stagingAppointment;if(r){var i=new D(r.id,n.title,n.startDateTime,n.endDateTime);a=Object(f.a)(Object(f.a)({},e),{},{appointments:e.appointments.map((function(e){return e.id===r.id?i:e}))})}else{var o=(1e7.toString()+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(e){return(Number(e)^crypto.getRandomValues(new Uint8Array(1))[0]&15>>Number(e)/4).toString(16)})),c=new D(o,t.payload.title,t.payload.startDateTime,t.payload.endDateTime);a=Object(f.a)(Object(f.a)({},e),{},{appointments:[].concat(Object(p.a)(e.appointments),[c])})}return localStorage.setItem("appointments",JSON.stringify(a.appointments)),a;case"EDIT_APPOINTMENT":var s=e.appointments.find((function(e){return e.id===t.payload}));return s?Object(f.a)(Object(f.a)({},e),{},{isDialogOpen:!0,stagingAppointment:s,selectedDay:s.startDate.toISODate()}):(console.error("No appointment found with id ".concat(t.payload)),e);default:throw new Error("Unhandled action: ".concat(t))}},k=function(e){var t=e.children,a=Object(r.useReducer)(S,T),i=Object(m.a)(a,2),o=i[0],c=i[1];return Object(n.jsx)(w.Provider,{value:o,children:Object(n.jsx)(I.Provider,{value:c,children:t})})},C=function(){var e=Object(r.useContext)(w);if(void 0===e)throw new Error("useCalendarState must be used within a CalendarProvider");return e},E=function(){var e=Object(r.useContext)(I);if(void 0===e)throw new Error("useCalendarDispatch must be used within a CalendarProvider");return e},N=a(62),A=function(e){var t=function(e){return b.DateTime.fromFormat(e,O).toLocaleString({locale:j,year:"numeric",month:"long"})}(e.month);return Object(n.jsx)(N.a,{component:"h1",variant:"h2",align:"center",gutterBottom:!0,children:t})},M=a(61),P=a(112),F=a(126),L=Object(P.a)((function(e){return Object(F.a)({container:{display:"grid",gridTemplateColumns:"repeat(7, minmax(0,1fr))",gridGap:e.spacing(1)},mbAllButLast:{"& > *:not(:last-child)":{marginBottom:e.spacing(.5)}}})})),B=Object(M.a)(d.a)({position:"sticky",top:0,marginBottom:4,zIndex:20,color:"#fff",backgroundColor:"#fff"}),_=function(e){var t=e.weekDays,a=L();return Object(n.jsx)(B,{p:1,className:a.container,children:t.map((function(e){return Object(n.jsx)(N.a,{component:"h4",align:"center",style:{borderRadius:2,backgroundColor:"#7aa0a8"},children:e.long},e.short)}))})},W=Object(M.a)(d.a)({display:"flex",overflowX:"hidden",maxWidth:"170%",borderRadius:2}),H=function(e){var t=e.data;return Object(n.jsxs)(W,{id:t.id,className:"appointment-identifier",p:.5,children:[Object(n.jsxs)("div",{style:{display:"flex",flexDirection:"column",fontSize:"smaller",lineHeight:1},children:[Object(n.jsx)("span",{children:g(t.startDate)}),Object(n.jsx)("span",{children:g(t.endDate)})]}),Object(n.jsx)("span",{style:{display:"flex",alignItems:"center",marginLeft:5,whiteSpace:"nowrap"},children:t.title})]})},z=Object(M.a)(d.a)({display:"flex",flexDirection:"column",minHeight:110,padding:6,border:"1px solid #88b0b8",borderRadius:2,position:"relative",outline:"none",boxShadow:"2px 2px 0px #88b0b8",cursor:"pointer",transition:"transform 0.2s, box-shadow 0.2s","&:hover, &:focus":{transform:"translate(-2px, -2px)",boxShadow:"4px 4px 0px #88b0b8",zIndex:10},"&:hover .appointment-identifier":{backgroundImage:"linear-gradient(45deg, #f494a9 30%, #f6957a 90%)"}}),G=Object(M.a)(d.a)({display:"flex",flexDirection:"column",flexGrow:1,maxHeight:115,overflowY:"hidden",overflowX:"hidden",borderRadius:6,"&:hover":{overflowY:"visible",overflowX:"visible"},"& > div":{display:"flex",flexDirection:"column",alignItems:"flex-start",flexGrow:1,padding:2},"& .appointment-identifier":{backgroundImage:"linear-gradient(45deg, #ebd7db 30%, #f1d3ca 90%)"},"& .appointment-identifier:hover":{backgroundImage:"linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)"}}),R=function(e){var t,a=e.date,r=E(),i=C().appointments,o=L(),c=function(e){var t;(t=e.target.closest(".appointment-identifier"))?r({type:"EDIT_APPOINTMENT",payload:t.id}):r({type:"NEW_APPOINTMENT",payload:a.key})};return Object(n.jsxs)(z,{tabIndex:0,onClick:function(e){return c(e)},onKeyDown:function(e){return"Enter"===e.key&&c(e)},bgcolor:(t=b.DateTime.fromISO(a.key),t.hasSame(b.DateTime.local(),"day")?"#e5fbdc":a.isWeekend?"#f4f1ce":"white"),style:{opacity:a.trailing?.4:1},children:[Object(n.jsx)(N.a,{component:"h5",align:"center",gutterBottom:!0,children:a.text}),Object(n.jsx)(G,{children:Object(n.jsx)("div",{className:o.mbAllButLast,children:i.filter((function(e){return e.daysInterval.contains(b.DateTime.fromISO("".concat(a.key,"T00:00:00Z")))})).sort((function(e,t){return e.startDate.toMillis()-t.startDate.toMillis()})).map((function(e){return Object(n.jsx)(H,{data:e},e.id)}))})})]})},U=function(e){var t=e.dates,a=L();return Object(n.jsx)(d.a,{px:1,className:a.container,children:t.map((function(e){return Object(n.jsx)(R,{date:e},e.key)}))})},q=function(){var e=Object(r.useState)((function(){var e=new Date;return b.DateTime.fromISO(e.toISOString()).toFormat("yyyy-MM")})),t=Object(m.a)(e,2),a=t[0],i=(t[1],function(){var e={locale:j},t=b.Info.weekdaysFormat("long",e),a=b.Info.weekdaysFormat("short",e),n=b.Info.weekdaysFormat("narrow",e);return Array(7).fill(null).map((function(e,r){return{long:t[r],short:a[r],narrow:n[r]}}))}()),o=function(e){var t=b.DateTime.fromFormat(e,O),a=b.Interval.fromDateTimes(t.startOf("month"),t.endOf("month")),n=a.start.weekday-1,r=7-a.end.weekday,i=b.Interval.fromDateTimes(a.start.minus({days:n>0?n:0}),a.end.plus({days:r})),o=i.count("days"),c=i.start;return Array(o).fill(null).map((function(e,a){var n=c.plus({days:a});return{key:n.toFormat("yyyy-MM-dd"),text:n.toLocaleString({locale:j,day:"numeric"}),trailing:!t.hasSame(n,"month"),isWeekend:h.includes(n.weekday)}}))}(a);return Object(n.jsxs)("div",{children:[Object(n.jsx)(A,{month:a}),Object(n.jsx)(N.a,{align:"center",gutterBottom:!0,children:"Seleccione un d\xeda para a\xf1adir una cita"}),Object(n.jsx)(_,{weekDays:i}),Object(n.jsx)(U,{dates:o})]})},J=a(125),X=a(114),Y=a(115),K=a(121),V=a(116),Z=a(124),Q=function(){var e=C(),t=e.isDialogOpen,a=e.selectedDay,i=e.stagingAppointment,o=E(),c=Object(r.useState)(""),s=Object(m.a)(c,2),l=s[0],d=s[1],u=Object(r.useState)(""),p=Object(m.a)(u,2),f=p[0],j=p[1],O=Object(r.useState)(!1),h=Object(m.a)(O,2),g=h[0],x=h[1],v=Object(r.useState)("07:00"),D=Object(m.a)(v,2),T=D[0],w=D[1],I=Object(r.useState)("08:00"),S=Object(m.a)(I,2),k=S[0],N=S[1];Object(r.useEffect)((function(){t&&i?(d("Editar"),j(i.title),w(y(i.startDate)),N(y(i.endDate))):d("A\xf1adir")}),[t]);var A=function(){o({type:"CLOSE_DIALOG"}),j("")};return Object(n.jsx)("div",{children:Object(n.jsxs)(J.a,{open:t,onClose:A,"aria-labelledby":"form-dialog-title","data-testid":"appointment-dialog",children:[Object(n.jsxs)(X.a,{id:"form-dialog-title",children:[l," Cita"]}),Object(n.jsxs)(Y.a,{children:[Object(n.jsx)(K.a,{required:!0,autoFocus:!0,margin:"dense",id:"title",label:"T\xedtulo",type:"text",fullWidth:!0,error:g,helperText:"T\xedtulo incorrecto.",value:f,onChange:function(e){return function(e){j(e.target.value)}(e)}}),Object(n.jsx)(K.a,{required:!0,margin:"dense",id:"startDate",label:"Hora de inicio",type:"time",fullWidth:!0,value:T,onChange:function(e){return function(e){w(e.target.value)}(e)}}),Object(n.jsx)(K.a,{margin:"dense",id:"endDate",label:"Hora de final",type:"time",fullWidth:!0,InputLabelProps:{shrink:!0},value:k,onChange:function(e){return function(e){N(e.target.value)}(e)}})]}),Object(n.jsxs)(V.a,{children:[Object(n.jsx)(Z.a,{onClick:A,color:"primary",children:"Cancelar"}),Object(n.jsx)(Z.a,{onClick:function(){if(""!==f.trim()){var e=b.DateTime.fromISO("".concat(a,"T").concat(T,":00"),{zone:"utc"}),t=b.DateTime.fromISO("".concat(a,"T").concat(k,":00"),{zone:"utc"});o({type:"SUBMIT_APPOINTMENT",payload:{title:f,startDateTime:e,endDateTime:t}}),A()}else x(!0)},variant:"contained",color:"primary",children:"Confirmar"})]})]})})},$=function(){return console.log("\ud83d\udc40"),Object(n.jsx)(l.a,{maxWidth:"lg",children:Object(n.jsxs)(d.a,{my:4,children:[Object(n.jsxs)(k,{children:[Object(n.jsx)(q,{}),Object(n.jsx)(Q,{})]}),Object(n.jsx)(d.a,{color:"textSecondary",textAlign:"center",mt:2,children:Object(n.jsx)(u.a,{color:"inherit",href:"https://github.com/juanramoncarceles/appointments-calendar",target:"_blank",children:"GitHub"})})]})})},ee=a(59),te=Object(ee.a)({palette:{primary:{main:"#88b0b8"},secondary:{main:"#dd57c0"},error:{main:"#da4848"},background:{default:"#fff"}}});o.a.render(Object(n.jsxs)(s.a,{theme:te,children:[Object(n.jsx)(c.a,{}),Object(n.jsx)($,{})]}),document.querySelector("#root"))}},[[84,1,2]]]);
//# sourceMappingURL=main.beaf8c5a.chunk.js.map